function redPack(a){this.el=a.el;this.rains=[];this.speed=a.speed;this.density=a.density;this.callback=a.callback}redPack.prototype.create=function(i,d){var f=this.el,h=this,a=true,b=document.createDocumentFragment(),c=document.createElement("span");c.setAttribute("redId",i);c.setAttribute("redAmount",d);c.className="redpack";c.style.left=Math.random()*(f.clientWidth-30)+"px";c.style.top=-f.clientHeight/10+"px";b.appendChild(c);f.appendChild(b);this.rains.push(c);this.move(c);var e=function(k){if(a===true){var j=c;k.target.className="redpack redpacked";h.callback(k);a=false}else{return}};document.addEventListener("touchstart",function(j){if(j.target.className==="redpack"){e(j)}else{if(j.target.getAttribute("redAmount")==="0"){j.target.className="redPackNone"}else{return false}}})};redPack.prototype.start=function(c){var b=this,a=0;b.timer=setInterval(function(){if(a<=c.length-1){var e=c[a].id,d=c[a].amount;b.create(e,d);a++}},b.density)};redPack.prototype.stop=function(){var b=this;clearInterval(b.timer);for(var a=0;a<b.rains.length;a++){clearInterval(b.rains[a].timer)}};redPack.prototype.move=function(a){var d=this.el;var e=this;var b=Math.random()+1;var c=Math.random();a.timer=setInterval(function(){if(b>1.5){a.style.left=parseInt(a.style.left)+parseInt(c*a.clientHeight/30)+"px"}else{a.style.left=parseInt(a.style.left)-parseInt(c*a.clientHeight/30)+"px"}a.style.top=parseInt(a.style.top)+parseInt(b*a.clientHeight/20)+"px";if(d.clientHeight<parseInt(a.style.top)){clearInterval(a.timer);d.removeChild(a)}},e.speed)};redPack.prototype.clear=function(){var b=g("box"),a=b.childNodes;for(var c=a.length-1;c>=0;c--){b.removeChild(a[c])}};redPack.prototype.ajax=function(d){d=d||{};d.method=(d.method==null?"GET":d.method.toUpperCase());d.url=d.url||"";d.async=d.async||true;d.data=d.data||null;d.success=d.success||function(){};var b=null;if(XMLHttpRequest){b=new XMLHttpRequest()}else{b=new ActiveXObject("Microsoft.XMLHTTP")}var e=[];for(var c in d.data){e.push(c+"="+d.data[c])}var a=e.join("&");if(d.method.toUpperCase()==="POST"){b.open(d.method,d.url,d.async);b.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8");b.send(a)}else{if(d.method.toUpperCase()==="GET"){b.open(d.method,d.url+"?"+a,d.async);b.send(null)}}b.onreadystatechange=function(){if(b.readyState===4&&b.status===200){d.success(b.responseText)}}};